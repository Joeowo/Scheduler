# Scheduler 开发文档

## 软件简介

本软件是一个高度轻量化、简便快速的日程管理系统

## 技术栈

### **Win32 API / C++**

- **适用场景**：需要最高性能、直接访问Windows桌面或系统资源（如桌面壁纸层叠、低延迟提醒等）。
- 优势
  - 直接操作Windows桌面，支持深度嵌入（如覆盖桌面图标区域）
  - 适合开发轻量级、高性能的工具，例如类似“Active Desktop Calendar”的桌面日历
- 工具链
  - 使用Visual Studio的C++开发环境，搭配Win32 API或DirectX（如需图形渲染）
  - 在本地存储数据
  - **示例**：通过`HWND`窗口句柄嵌入桌面，或使用透明窗口覆盖桌面区域

## 数据结构

### 任务

- 任务id
- 开始时间-年月日
- 结束时间-年月日
- 任务名称
- 启用状态：1（活跃）2（完成）3（终止）

### 活跃日志

记录活跃状态任务的id

### 非活跃日志

按顺序记录完成和终止状态的任务id

### 用户设置

用户上次设置的开始时间

用户上次设置的结束时间

用户上次设置的主模式

用户上次设置的活跃任务模式

用户上次设置的历史记录模式

用户的自定义设置

## 页面架构

总体设计：嵌入桌面的透明窗口

顶部：（视图选择）活跃任务 | 历史记录

---

活跃任务模式：
顶部： 模式选择： EARLY || DDL

[创建任务]

[任务1名称 开始时间 结束时间 [完成] [终止]]

[任务2名称 开始时间 结束时间 [完成] [终止]]

...

[任务n名称 开始时间 结束时间 [完成] [终止]]

---

历史记录模式

顶部： 模式选择： 完成 || 终止

[任务1名称 开始时间 结束时间]

[任务2名称 开始时间 结束时间]

...

[任务n名称 开始时间 结束时间]

---

底部：设置符 | 分页指示器 [1] [2] ... [end]

## 功能介绍

### 主模式选择

用户可以选择活跃任务模式/历史记录模式 

选择后自动更新用户设置中的“用户上次设置的主模式”

### 模式选择

活跃任务模式下：

用户选择EARLY， 则任务按开始时间升序排序

用户选择DDL 则任务按照结束时间降序排序

选择后自动更新用户设置中的“用户上次设置的活跃任务模式”



历史记录模式下：

用户选择完成 则按倒序显示状态为完成的任务

用户选择终止 则按倒序显示状态为终止的任务

选择后自动更新用户设置中的“用户上次设置的历史任务模式”

### 任务创建

在活跃任务模式

用户点击任务创建，在【任务创建】按钮下展开编辑区

用户可以编辑任务名称/开始时间/结束时间

其中 开始时间/结束时间 的默认值在“用户设置”中取得

用户点击【确认】创建任务，自动更新“用户设置”中用户上次设置的开始时间和用户上次设置的结束时间

用户也可以点击【取消】退出任务创建，收起编辑区



### 任务管理

在活跃任务模式

用户可以点击[完成] [终止]按钮快捷管理任务状态

可以右键，点击【编辑】，展开编辑区，具体编辑操作同“任务创建”



在历史任务模式，用户可以右键点击任务，然后点击弹出的【恢复】【完成】【终止】【删除】按钮，更新任务状态为 1（活跃）2（完成）3（终止）或在数据存储中删除该条记录。 若用户点击删除，需要弹出【确认|取消】弹窗进行二次确认

若任务从完成/终止被更新为活跃，则需要同步更新 “非活跃日志” 和 “活跃日志”

若任务被删除，则从“非活跃日志” 删除该记录



### 分页管理

一个页面中最多显示十条记录，用户可以通过操作分页指示器查看剩余内容

也可以点击  [...]，然后输入具体页码进行跳转（需要验证页码合法性）



### 自定义设置

用户可以自定义页框和字体的颜色



### 优化                                                             

1. 默认只显示在桌面上，不覆盖在别的应用上
2. 点击右上角“图钉”图标可以保持显示在最上方
3. 鼠标点住窗口顶部可以拖动窗口
4. 历史记录模式不显示“创建任务”按钮
5. 合理设置数据类型，确保能够正确保存和加载包含中文、特殊字符
6. 尽量选用与UTF-8兼容的windows api
7. 样式尽量美观